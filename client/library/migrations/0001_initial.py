# Generated by Django 4.2.7 on 2025-07-21 20:13

from django.db import migrations, models
import django.db.models.deletion
import client.library.models


class Migration(migrations.Migration):

    initial = True

    dependencies = []

    operations = [
        migrations.CreateModel(
            name="DocumentCategory",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                (
                    "name",
                    models.CharField(
                        max_length=100, verbose_name="Nom de la catégorie"
                    ),
                ),
                (
                    "code",
                    models.CharField(max_length=20, unique=True, verbose_name="Code"),
                ),
                (
                    "description",
                    models.TextField(blank=True, verbose_name="Description"),
                ),
                (
                    "color",
                    models.CharField(
                        default="#3498db", max_length=7, verbose_name="Couleur"
                    ),
                ),
            ],
            options={
                "verbose_name": "Catégorie de document",
                "verbose_name_plural": "Catégories de documents",
                "ordering": ["name"],
            },
        ),
        migrations.CreateModel(
            name="RegulatoryAuthority",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                (
                    "name",
                    models.CharField(max_length=200, verbose_name="Nom de l'autorité"),
                ),
                (
                    "code",
                    models.CharField(max_length=10, unique=True, verbose_name="Code"),
                ),
                ("country", models.CharField(max_length=100, verbose_name="Pays")),
                ("website", models.URLField(blank=True, verbose_name="Site web")),
            ],
            options={
                "verbose_name": "Autorité réglementaire",
                "verbose_name_plural": "Autorités réglementaires",
                "ordering": ["name"],
            },
        ),
        migrations.CreateModel(
            name="Document",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                ("title", models.CharField(max_length=500, verbose_name="Titre")),
                (
                    "description",
                    models.TextField(blank=True, verbose_name="Description"),
                ),
                (
                    "document_type",
                    models.CharField(
                        choices=[
                            ("guideline", "Guideline"),
                            ("regulation", "Régulation"),
                            ("gmp", "GMP"),
                            ("ich", "ICH"),
                            ("qa", "Q&A"),
                            ("template", "Template"),
                            ("other", "Autre"),
                        ],
                        max_length=20,
                        verbose_name="Type de document",
                    ),
                ),
                ("source_url", models.URLField(blank=True, verbose_name="URL source")),
                (
                    "reference_number",
                    models.CharField(
                        blank=True, max_length=100, verbose_name="Numéro de référence"
                    ),
                ),
                (
                    "file",
                    models.FileField(
                        upload_to=client.library.models.document_upload_path,
                        verbose_name="Fichier",
                    ),
                ),
                (
                    "file_size",
                    models.PositiveIntegerField(
                        blank=True, null=True, verbose_name="Taille du fichier (bytes)"
                    ),
                ),
                (
                    "language",
                    models.CharField(
                        choices=[
                            ("en", "English"),
                            ("fr", "Français"),
                            ("de", "Deutsch"),
                            ("es", "Español"),
                            ("it", "Italiano"),
                            ("multi", "Multilingue"),
                        ],
                        default="en",
                        max_length=10,
                        verbose_name="Langue",
                    ),
                ),
                (
                    "publication_date",
                    models.DateField(verbose_name="Date de publication"),
                ),
                (
                    "effective_date",
                    models.DateField(
                        blank=True, null=True, verbose_name="Date d'entrée en vigueur"
                    ),
                ),
                (
                    "expiry_date",
                    models.DateField(
                        blank=True, null=True, verbose_name="Date d'expiration"
                    ),
                ),
                (
                    "validation_status",
                    models.CharField(
                        choices=[
                            ("pending", "En attente de validation"),
                            ("validated", "Validé"),
                            ("rejected", "Rejeté"),
                            ("expired", "Expiré"),
                        ],
                        default="pending",
                        max_length=20,
                        verbose_name="Statut de validation",
                    ),
                ),
                (
                    "validated_by",
                    models.CharField(
                        blank=True, max_length=100, verbose_name="Validé par"
                    ),
                ),
                (
                    "validation_date",
                    models.DateTimeField(
                        blank=True, null=True, verbose_name="Date de validation"
                    ),
                ),
                (
                    "validation_notes",
                    models.TextField(blank=True, verbose_name="Notes de validation"),
                ),
                (
                    "tags",
                    models.CharField(
                        blank=True,
                        max_length=500,
                        verbose_name="Tags (séparés par des virgules)",
                    ),
                ),
                (
                    "ctd_section",
                    models.CharField(
                        blank=True, max_length=50, verbose_name="Section CTD"
                    ),
                ),
                (
                    "therapeutic_area",
                    models.CharField(
                        blank=True, max_length=200, verbose_name="Zone thérapeutique"
                    ),
                ),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
                (
                    "created_by",
                    models.CharField(
                        blank=True, max_length=100, verbose_name="Créé par"
                    ),
                ),
                (
                    "download_count",
                    models.PositiveIntegerField(
                        default=0, verbose_name="Nombre de téléchargements"
                    ),
                ),
                (
                    "view_count",
                    models.PositiveIntegerField(
                        default=0, verbose_name="Nombre de vues"
                    ),
                ),
                (
                    "authority",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        to="library.regulatoryauthority",
                        verbose_name="Autorité réglementaire",
                    ),
                ),
                (
                    "category",
                    models.ForeignKey(
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        to="library.documentcategory",
                        verbose_name="Catégorie",
                    ),
                ),
            ],
            options={
                "verbose_name": "Document",
                "verbose_name_plural": "Documents",
                "ordering": ["-created_at"],
            },
        ),
        migrations.CreateModel(
            name="DocumentVersion",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                ("version", models.CharField(max_length=20, verbose_name="Version")),
                (
                    "file",
                    models.FileField(
                        upload_to=client.library.models.document_upload_path,
                        verbose_name="Fichier",
                    ),
                ),
                (
                    "release_notes",
                    models.TextField(blank=True, verbose_name="Notes de version"),
                ),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                (
                    "created_by",
                    models.CharField(
                        blank=True, max_length=100, verbose_name="Créé par"
                    ),
                ),
                (
                    "document",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="versions",
                        to="library.document",
                    ),
                ),
            ],
            options={
                "verbose_name": "Version de document",
                "verbose_name_plural": "Versions de documents",
                "ordering": ["-created_at"],
                "unique_together": {("document", "version")},
            },
        ),
        migrations.CreateModel(
            name="DocumentTranslation",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                (
                    "language",
                    models.CharField(
                        choices=[
                            ("en", "English"),
                            ("fr", "Français"),
                            ("de", "Deutsch"),
                            ("es", "Español"),
                            ("it", "Italiano"),
                            ("multi", "Multilingue"),
                        ],
                        max_length=10,
                        verbose_name="Langue de traduction",
                    ),
                ),
                (
                    "title",
                    models.CharField(max_length=500, verbose_name="Titre traduit"),
                ),
                (
                    "description",
                    models.TextField(blank=True, verbose_name="Description traduite"),
                ),
                (
                    "file",
                    models.FileField(
                        upload_to=client.library.models.document_upload_path,
                        verbose_name="Fichier traduit",
                    ),
                ),
                (
                    "translation_method",
                    models.CharField(
                        choices=[
                            ("manual", "Manuel"),
                            ("ai", "IA"),
                            ("hybrid", "Hybride"),
                        ],
                        max_length=20,
                        verbose_name="Méthode de traduction",
                    ),
                ),
                (
                    "validated",
                    models.BooleanField(
                        default=False, verbose_name="Traduction validée"
                    ),
                ),
                (
                    "validated_by",
                    models.CharField(
                        blank=True, max_length=100, verbose_name="Validé par"
                    ),
                ),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                (
                    "original_document",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="translations",
                        to="library.document",
                    ),
                ),
            ],
            options={
                "verbose_name": "Traduction de document",
                "verbose_name_plural": "Traductions de documents",
                "unique_together": {("original_document", "language")},
            },
        ),
        migrations.AddIndex(
            model_name="document",
            index=models.Index(
                fields=["document_type"], name="library_doc_documen_69964e_idx"
            ),
        ),
        migrations.AddIndex(
            model_name="document",
            index=models.Index(
                fields=["validation_status"], name="library_doc_validat_5a46b0_idx"
            ),
        ),
        migrations.AddIndex(
            model_name="document",
            index=models.Index(
                fields=["authority"], name="library_doc_authori_88b33a_idx"
            ),
        ),
        migrations.AddIndex(
            model_name="document",
            index=models.Index(
                fields=["publication_date"], name="library_doc_publica_152e62_idx"
            ),
        ),
    ]
